{"cells":[{"cell_type":"markdown","metadata":{"id":"qlZ50Wpohis5"},"source":["# Chap6\n","os套件：用來處理文件與目錄，與檔案相關操作"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"56pLIzz1his8","outputId":"fe3545dd-3ece-4276-d371-c3a96a012d32"},"outputs":[{"name":"stdout","output_type":"stream","text":["C:\\Users\\Administrator\n"]}],"source":["import os\n","print(os.getcwd()) #顯示目前所在的工作目錄"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"qxWI9V3ihis-","outputId":"ef7e0509-9a59-4848-b918-0eae552b5483"},"outputs":[{"data":{"text/plain":["['.conda',\n"," '.condarc',\n"," '.config',\n"," '.dotnet',\n"," '.eclipse',\n"," '.ipynb_checkpoints',\n"," '.ipython',\n"," '.p2',\n"," '.packettracer',\n"," '.templateengine',\n"," '.tooling',\n"," '.VirtualBox',\n"," '.vscode',\n"," '3D Objects',\n"," 'anaconda3',\n"," 'AppData',\n"," 'Application Data',\n"," 'Chap6_inclass.ipynb',\n"," 'Cisco Packet Tracer 6.1.1sv',\n"," 'Cisco Packet Tracer 7.3.0',\n"," 'Cisco Packet Tracer 7.3.1',\n"," 'Contacts',\n"," 'Cookies',\n"," 'Desktop',\n"," 'Documents',\n"," 'Downloads',\n"," 'Favorites',\n"," 'Intel',\n"," 'IntelGraphicsProfiles',\n"," 'Links',\n"," 'Local Settings',\n"," 'MicrosoftEdgeBackups',\n"," 'Music',\n"," 'My Documents',\n"," 'NetHood',\n"," 'NTUSER.DAT',\n"," 'ntuser.dat.LOG1',\n"," 'ntuser.dat.LOG2',\n"," 'NTUSER.DAT{53b39e88-18c4-11ea-a811-000d3aa4692b}.TM.blf',\n"," 'NTUSER.DAT{53b39e88-18c4-11ea-a811-000d3aa4692b}.TMContainer00000000000000000001.regtrans-ms',\n"," 'NTUSER.DAT{53b39e88-18c4-11ea-a811-000d3aa4692b}.TMContainer00000000000000000002.regtrans-ms',\n"," 'ntuser.ini',\n"," 'Oracle',\n"," 'Pictures',\n"," 'PrintHood',\n"," 'Recent',\n"," 'Saved Games',\n"," 'Searches',\n"," 'SendTo',\n"," 'source',\n"," 'Templates',\n"," 'Videos',\n"," 'VirtualBox VMs',\n"," '「開始」功能表']"]},"execution_count":2,"metadata":{},"output_type":"execute_result"}],"source":["#顯示目錄下的檔案\n","os.listdir(\".\")"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"N9Ia6wFkhis-","outputId":"bab041c0-6006-40b7-e79f-28390b15db08"},"outputs":[{"data":{"text/plain":["['.conda',\n"," '.condarc',\n"," '.config',\n"," '.dotnet',\n"," '.eclipse',\n"," '.ipynb_checkpoints',\n"," '.ipython',\n"," '.p2',\n"," '.packettracer',\n"," '.templateengine',\n"," '.tooling',\n"," '.VirtualBox',\n"," '.vscode',\n"," '3D Objects',\n"," 'anaconda3',\n"," 'AppData',\n"," 'Application Data',\n"," 'Chap6_inclass.ipynb',\n"," 'Cisco Packet Tracer 6.1.1sv',\n"," 'Cisco Packet Tracer 7.3.0',\n"," 'Cisco Packet Tracer 7.3.1',\n"," 'Contacts',\n"," 'Cookies',\n"," 'Desktop',\n"," 'Documents',\n"," 'Downloads',\n"," 'Favorites',\n"," 'Intel',\n"," 'IntelGraphicsProfiles',\n"," 'Links',\n"," 'Local Settings',\n"," 'MicrosoftEdgeBackups',\n"," 'Music',\n"," 'My Documents',\n"," 'NetHood',\n"," 'NTUSER.DAT',\n"," 'ntuser.dat.LOG1',\n"," 'ntuser.dat.LOG2',\n"," 'NTUSER.DAT{53b39e88-18c4-11ea-a811-000d3aa4692b}.TM.blf',\n"," 'NTUSER.DAT{53b39e88-18c4-11ea-a811-000d3aa4692b}.TMContainer00000000000000000001.regtrans-ms',\n"," 'NTUSER.DAT{53b39e88-18c4-11ea-a811-000d3aa4692b}.TMContainer00000000000000000002.regtrans-ms',\n"," 'ntuser.ini',\n"," 'Oracle',\n"," 'Pictures',\n"," 'PrintHood',\n"," 'Recent',\n"," 'Saved Games',\n"," 'Searches',\n"," 'SendTo',\n"," 'source',\n"," 'Templates',\n"," 'test',\n"," 'Videos',\n"," 'VirtualBox VMs',\n"," '「開始」功能表']"]},"execution_count":3,"metadata":{},"output_type":"execute_result"}],"source":["#新增目錄\n","os.makedirs(\"test\")\n","os.listdir(\".\")"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"01pxbzGShis_","outputId":"7ae86579-ec10-49bf-f02e-2386a4989112"},"outputs":[{"data":{"text/plain":["['.conda',\n"," '.condarc',\n"," '.config',\n"," '.dotnet',\n"," '.eclipse',\n"," '.ipynb_checkpoints',\n"," '.ipython',\n"," '.p2',\n"," '.packettracer',\n"," '.templateengine',\n"," '.tooling',\n"," '.VirtualBox',\n"," '.vscode',\n"," '3D Objects',\n"," 'anaconda3',\n"," 'AppData',\n"," 'Application Data',\n"," 'Chap6_inclass.ipynb',\n"," 'Cisco Packet Tracer 6.1.1sv',\n"," 'Cisco Packet Tracer 7.3.0',\n"," 'Cisco Packet Tracer 7.3.1',\n"," 'Contacts',\n"," 'Cookies',\n"," 'Desktop',\n"," 'Documents',\n"," 'Downloads',\n"," 'Favorites',\n"," 'Intel',\n"," 'IntelGraphicsProfiles',\n"," 'Links',\n"," 'Local Settings',\n"," 'MicrosoftEdgeBackups',\n"," 'Music',\n"," 'My Documents',\n"," 'NetHood',\n"," 'NTUSER.DAT',\n"," 'ntuser.dat.LOG1',\n"," 'ntuser.dat.LOG2',\n"," 'NTUSER.DAT{53b39e88-18c4-11ea-a811-000d3aa4692b}.TM.blf',\n"," 'NTUSER.DAT{53b39e88-18c4-11ea-a811-000d3aa4692b}.TMContainer00000000000000000001.regtrans-ms',\n"," 'NTUSER.DAT{53b39e88-18c4-11ea-a811-000d3aa4692b}.TMContainer00000000000000000002.regtrans-ms',\n"," 'ntuser.ini',\n"," 'Oracle',\n"," 'Pictures',\n"," 'PrintHood',\n"," 'Recent',\n"," 'Saved Games',\n"," 'Searches',\n"," 'SendTo',\n"," 'source',\n"," 'Templates',\n"," 'Videos',\n"," 'VirtualBox VMs',\n"," '「開始」功能表']"]},"execution_count":4,"metadata":{},"output_type":"execute_result"}],"source":["#移除目錄\n","os.rmdir(\"test\")\n","os.listdir(\".\")"]},{"cell_type":"markdown","metadata":{"id":"YkwT-5-Ihis_"},"source":["## 檔案處理\n","os套件有自己的檔案處理命令，而比較常用的是python內建的open\n","* w = 可寫(預設建立檔案) 若檔案存在則會清除舊檔案\n","* w+ = 可寫可讀(預設建立檔案) 若檔案存在則會清除舊檔案\n","* r = 可讀\n","* r+ = 可寫可讀 但寫入資料指向開頭\n","* a = 可寫不能讀 寫入資料指向尾端\n","* a+ = 可寫可讀 寫入資料指向尾端\n","* b = 轉為2進位文件\n","* ab+ = 2進位文件的讀寫 寫入資料指向尾端"]},{"cell_type":"markdown","metadata":{"id":"8TaT56HdhitA"},"source":["## 新增檔案"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"gon9ctsrhitB"},"outputs":[],"source":["a=open(\"a.txt\",\"w\") #新增檔案\n","a.write(\"This is a test1\")\n","a.write(\"This is a test2\\n\")\n","a.write(\"This is a test3\\n\")\n","a.close() #關閉檔案"]},{"cell_type":"markdown","metadata":{"id":"vv5EvxK3hitC"},"source":["## 檢查檔案是否存在"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"qZzqOKz1hitC","outputId":"2c834c0d-7c55-40af-a036-2e5355749d57"},"outputs":[{"data":{"text/plain":["True"]},"execution_count":6,"metadata":{},"output_type":"execute_result"}],"source":["os.path.isfile(\"a.txt\")"]},{"cell_type":"markdown","metadata":{"id":"7uZqRdwVhitD"},"source":["## 讀取檔案"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"IsLbv8AehitD","outputId":"68aaf716-e7f4-47de-90df-0503ab235e22"},"outputs":[{"name":"stdout","output_type":"stream","text":["This is a test1This is a test2\n","\n","This is a test3\n","\n","\n"]}],"source":["a=open(\"a.txt\",\"r\")\n","print(a.readline())\n","print(a.readline())\n","print(a.readline()) #多餘的命令，檔案只有2行\n","a.close()"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"lCAztm9BhitD","outputId":"7ac4f7d5-e70d-4421-9d42-c313a08a2ea4"},"outputs":[{"name":"stdout","output_type":"stream","text":["['This is a test1This is a test2\\n', 'This is a test3\\n']\n"]}],"source":["a=open(\"a.txt\",\"r\")\n","print(a.readlines())  #一次讀取多行，與a.read()命令相同\n","a.close()"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"zAo5UcsyhitE","outputId":"512352ec-d5ff-4762-fa89-3c2969207f8d"},"outputs":[{"name":"stdout","output_type":"stream","text":["['This is a test1This is a test2\\n', 'This is a test3\\n']\n"]}],"source":["#加上檔案是否存在的判斷\n","if os.path.isfile(\"a.txt\"):\n","    a=open(\"a.txt\",\"r\")\n","    print(a.readlines())\n","    a.close()\n","else:\n","    print(\"檔案不存在\")"]},{"cell_type":"markdown","metadata":{"id":"xmJTUCDkhitE"},"source":["## split函式"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"1dLz53cZhitE","outputId":"5a452bca-c827-4a68-f64e-3c6ece099a96"},"outputs":[{"name":"stdout","output_type":"stream","text":["['This', 'is', 'a', 'test1This', 'is', 'a', 'test2\\n']\n","['This', 'is', 'a', 'test3\\n']\n"]}],"source":["if os.path.isfile(\"a.txt\"):\n","    a=open(\"a.txt\",\"r\")\n","    for line in a:\n","        fields=line.split(\" \") #以空白為切割欄位\n","        print(fields)\n","    a.close()\n","else:\n","    print(\"檔案不存在\")\n","        "]},{"cell_type":"markdown","metadata":{"id":"k3lxFTm6hitF"},"source":["## 附加檔案"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"xEfVPr9BhitF"},"outputs":[],"source":["a=open(\"a.txt\", \"a\")\n","a.write(\"This is test4\\n\")\n","a.close()"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"ipXGoRu1hitF","outputId":"a8643ff1-d565-440d-9aef-95239c376725"},"outputs":[{"name":"stdout","output_type":"stream","text":["['This is a test1This is a test2\\n', 'This is a test3\\n', 'This is test4\\n']\n"]}],"source":["a=open(\"a.txt\",\"r\")\n","print(a.readlines())\n","a.close()"]},{"cell_type":"markdown","metadata":{"id":"KFS8ySIjhitG"},"source":["## 比較a與r+的不同\n","* a寫在檔案的結尾\n","* r+寫在檔案的開頭"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"pzXoP69hhitG"},"outputs":[],"source":["a=open(\"a.txt\",\"r+\")\n","a.write(\"This is a test5\\n\")\n","a.close()"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"OYa3R1gGhitG","outputId":"0aaae30a-dffb-4a30-b324-c28def8558f2"},"outputs":[{"name":"stdout","output_type":"stream","text":["['This is a test5\\n', 'is is a test2\\n', 'This is a test3\\n', 'This is test4\\n']\n"]}],"source":["a=open(\"a.txt\",\"r\")\n","print(a.readlines())\n","a.close()"]},{"cell_type":"markdown","metadata":{"id":"vOLYv3GAhitG"},"source":["## 刪除檔案"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"_Lete0KUhitG","outputId":"0ef5365e-12af-4496-f5b9-9b0ecdc6d2e9"},"outputs":[{"name":"stdout","output_type":"stream","text":["檔案刪除成功\n","False\n"]}],"source":["if os.path.isfile(\"a.txt\"):\n","    os.remove(\"a.txt\")\n","    print(\"檔案刪除成功\")\n","else:\n","    print(\"找不到檔案\")\n","print(os.path.isfile(\"a.txt\"))"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"jv59XlOfhitH"},"outputs":[],"source":[""]}],"metadata":{"kernelspec":{"display_name":"Python 3","language":"python","name":"python3"},"language_info":{"codemirror_mode":{"name":"ipython","version":3},"file_extension":".py","mimetype":"text/x-python","name":"python","nbconvert_exporter":"python","pygments_lexer":"ipython3","version":"3.8.5"},"colab":{"name":"「Chap6.ipynb」的副本","provenance":[{"file_id":"https://github.com/shhuangmust/python/blob/110-2/Chap6.ipynb","timestamp":1655651582707}]}},"nbformat":4,"nbformat_minor":0}